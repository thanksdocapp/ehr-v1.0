<div class="admin-card">
    <div class="card-header">
        <h3 class="card-title mb-0">
            <i class="fas fa-code me-2 text-primary"></i>Available Template Variables
        </h3>
        <small class="text-muted">Click on any variable to insert it into the editor</small>
    </div>
    <div class="card-body">
        <div class="variable-list">
            <!-- Template Name Examples -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-file-alt me-1"></i>Template Name Examples
                </h6>
                <div class="template-name-examples">
                    <small class="text-muted d-block mb-2">Common template naming patterns:</small>
                    <div class="variable-item template-example">
                        <code>appointment_confirmation</code>
                        <small class="text-muted d-block">Appointment confirmation emails</small>
                    </div>
                    <div class="variable-item template-example">
                        <code>appointment_reminder</code>
                        <small class="text-muted d-block">Appointment reminder emails</small>
                    </div>
                    <div class="variable-item template-example">
                        <code>prescription_ready</code>
                        <small class="text-muted d-block">Prescription ready notifications</small>
                    </div>
                    <div class="variable-item template-example">
                        <code>lab_results_available</code>
                        <small class="text-muted d-block">Lab results notifications</small>
                    </div>
                    <div class="variable-item template-example">
                        <code>billing_statement</code>
                        <small class="text-muted d-block">Billing and invoice emails</small>
                    </div>
                    <div class="variable-item template-example">
                        <code>welcome_new_patient</code>
                        <small class="text-muted d-block">New patient welcome emails</small>
                    </div>
                </div>
            </div>
            
            <!-- Patient Information -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-user me-1"></i>Patient Information
                </h6>
                <div class="variable-item">
                    <code>&#123;&#123;patient_name&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's full name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_first_name&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's first name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_last_name&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's last name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_id&#125;&#125;</code>
                    <small class="text-muted d-block">Patient ID number</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_email&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's email address</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_phone&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's phone number</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_age&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's age</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_gender&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's gender</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_address&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's full address</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;patient_date_of_birth&#125;&#125;</code>
                    <small class="text-muted d-block">Patient's date of birth</small>
                </div>
            </div>
            
            <!-- Doctor Information -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-user-md me-1"></i>Doctor Information
                </h6>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_name&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's full name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_first_name&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's first name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_last_name&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's last name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_specialization&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's specialization</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_phone&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's phone number</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;doctor_email&#125;&#125;</code>
                    <small class="text-muted d-block">Doctor's email address</small>
                </div>
            </div>

            <!-- Appointment Details -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-calendar-alt me-1"></i>Appointment Details
                </h6>
                <div class="variable-item">
                    <code>&#123;&#123;appointment_id&#125;&#125;</code>
                    <small class="text-muted d-block">Unique appointment ID</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;appointment_date&#125;&#125;</code>
                    <small class="text-muted d-block">Appointment date</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;appointment_time&#125;&#125;</code>
                    <small class="text-muted d-block">Appointment time</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;appointment_type&#125;&#125;</code>
                    <small class="text-muted d-block">Type of appointment</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;department&#125;&#125;</code>
                    <small class="text-muted d-block">Hospital department</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;room_number&#125;&#125;</code>
                    <small class="text-muted d-block">Room/office number</small>
                </div>
            </div>
            
            <!-- Hospital Information -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-hospital me-1"></i>Hospital Information
                </h6>
                <div class="variable-item">
                    <code>&#123;&#123;hospital_name&#125;&#125;</code>
                    <small class="text-muted d-block">Hospital/clinic name</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;hospital_phone&#125;&#125;</code>
                    <small class="text-muted d-block">Main hospital phone</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;hospital_email&#125;&#125;</code>
                    <small class="text-muted d-block">Hospital contact email</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;hospital_address&#125;&#125;</code>
                    <small class="text-muted d-block">Hospital full address</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;hospital_website&#125;&#125;</code>
                    <small class="text-muted d-block">Hospital website URL</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;emergency_number&#125;&#125;</code>
                    <small class="text-muted d-block">Emergency contact number</small>
                </div>
            </div>
            
            <!-- System Variables -->
            <div class="variable-category">
                <h6 class="text-primary">
                    <i class="fas fa-cog me-1"></i>System Variables
                </h6>
                <div class="variable-item">
                    <code>&#123;&#123;current_date&#125;&#125;</code>
                    <small class="text-muted d-block">Current date</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;current_time&#125;&#125;</code>
                    <small class="text-muted d-block">Current time</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;current_year&#125;&#125;</code>
                    <small class="text-muted d-block">Current year</small>
                </div>
                <div class="variable-item">
                    <code>&#123;&#123;support_email&#125;&#125;</code>
                    <small class="text-muted d-block">Support email address</small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add click handlers for inserting variables into editor
    document.querySelectorAll('.variable-item code').forEach(code => {
        code.style.cursor = 'pointer';
        code.addEventListener('click', function() {
            const variableText = this.textContent;
            
            // Try to insert into active editor (TinyMCE, CodeMirror, or textarea)
            if (typeof tinyMCE !== 'undefined' && tinyMCE.activeEditor) {
                tinyMCE.activeEditor.insertContent(variableText);
            } else {
                // Find the active textarea or input field
                const activeElement = document.activeElement;
                if (activeElement.tagName === 'TEXTAREA' || activeElement.tagName === 'INPUT') {
                    const start = activeElement.selectionStart;
                    const end = activeElement.selectionEnd;
                    const value = activeElement.value;
                    
                    activeElement.value = value.substring(0, start) + variableText + value.substring(end);
                    activeElement.selectionStart = activeElement.selectionEnd = start + variableText.length;
                    activeElement.focus();
                }
            }
            
            // Visual feedback
            this.style.backgroundColor = '#28a745';
            this.style.color = 'white';
            setTimeout(() => {
                this.style.backgroundColor = '';
                this.style.color = '';
            }, 200);
        });
    });
});
</script>
